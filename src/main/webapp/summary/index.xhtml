<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:body>
        <ui:composition template="../index.xhtml">

            <ui:define name="title">#{msg.applicationTitle} - Yhteenveto</ui:define>

            <ui:define name="mainpage">

                <h:outputStylesheet library="css" name="summary.css"/>
                <h:outputStylesheet library="css" name="timeline.css"/>
                <h:outputStylesheet library="primefaces" name="grid/grid.css"/>
                <h:outputScript library="primefaces" name="jquery/jquery.js" />

                <p:growl id="growl" widgetVar="growlWdgt" severity="info" showDetail="true" sticky="true" escape="false" />

                <div class="background">
                    <div id="details" class="inline-bar content">
                        <div class="header-left"><h2>#{summaryBean.observationName}</h2></div>
                        <div class="inline-bar align-bar">
                            <div>
                                <div id="total-records" class="total"></div>
                                <div><span>Kirjausta</span></div>
                            </div>
                            <div>
                                <div id="total-duration" class="total"></div>
                                <div><span>Kesto</span></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ui-fluid">
                    <h3 class="recordsHeader">Kirjaukset</h3>

                    <h:form styleClass="actions-form">
                        <p:commandButton value="Lähetä" id="mailButton" icon="fa fa-envelope-o"
                                         onclick="PF('dlgMail').show();"/>
                        <p:commandButton value="Tallenna" id="saveButton" icon="fa fa-save"
                                         onclick="PF('dlgSave').show();"/>
                    </h:form>
                    <p:dialog header="Lähetä observointi sähköpostiin"
                              widgetVar="dlgMail"
                              position="top"
                              draggable="false"
                              resizable="false"
                              responsive="true"
                              modal="true"
                              fitViewport="true"
                              styleClass="coloredButton">
                        <h:form styleClass="dialog-form">
                            <p:inputText id="input-name"
                                         value="#{summaryBean.observationName}"
                                         placeholder="Observoinnin nimi"/>
                            <p:inputText id="input-target"
                                         value="#{summaryBean.observationTarget}"
                                         placeholder="Observoinnin kohde"/>
                            <p:inputTextarea id="input-description"
                                             value="#{summaryBean.observationDescription}"
                                             placeholder="Observoinnin kuvaus"
                                             rows="6" cols="33" autoResize="true" />
                            <h:outputText value="Anna sähköpostiosoite"/>
                            <p:inputText id="input-email"
                                         placeholder="Sähköpostiosoite" />
                            <p:commandButton value="Lähetä" icon="ui-icon-check"
                                             onclick="PF('dlgMail').hide();"
                                             actionListener="#{buttonView.buttonAction}" />
                        </h:form>
                    </p:dialog>
                    <p:dialog header="Tallenna observointi"
                              widgetVar="dlgSave"
                              position="top"
                              draggable="false"
                              resizable="false"
                              responsive="true"
                              modal="true"
                              fitViewport="true"
                              styleClass="coloredButton">
                        <h:form styleClass="dialog-form">
                            <p:inputText id="input-name"
                                         value="#{summaryBean.observationName}"
                                         placeholder="Observoinnin nimi"/>
                            <p:inputText id="input-target"
                                         value="#{summaryBean.observationTarget}"
                                         placeholder="Observoinnin kohde"/>
                            <p:inputTextarea id="input-description"
                                             value="#{summaryBean.observationDescription}"
                                             placeholder="Observoinnin kuvaus"
                                             rows="6" cols="33" autoResize="true" />
                            <p:commandButton value="Tallenna" icon="ui-icon-check"
                                             onclick="PF('dlgSave').hide();"
                                             actionListener="#{buttonView.buttonAction}"/>
                        </h:form>
                    </p:dialog>
                </div>


                <div id="observation-info" class="ui-fluid">
                    <div class="ui-grid ui-grid-responsive-260">
                        <div class="ui-grid-row">
                            <div class="ui-grid-col-5">Kategoria</div>
                            <div class="ui-grid-col-2">Kertoja</div>
                            <div class="ui-grid-col-1"/>
                            <div class="ui-grid-col-2">Kesto</div>
                            <div class="ui-grid-col-1"/>
                        </div>
                    </div>
                    <div id="records" class="ui-grid ui-grid-responsive-260 background"/>
                </div>
                <div class="timelineControls">
                    <div>
                        <span>Rajaus </span>
                        <p:inputMask id="input-rangeStart"
                                     mask="99:99:99" autocomplete="false"
                                     size="6" placeholder="hh:mm:ss">
                            <f:validateRegex pattern="(^$|^__:__:__$|^(\d+:)?(\d+:)?\d+$)" />
                            <p:clientValidator event="keyup"/>
                        </p:inputMask>
                        <span> - </span>
                        <p:inputMask id="input-rangeEnd"
                                     mask="99:99:99" autocomplete="false"
                                     size="6" placeholder="hh:mm:ss">
                            <f:validateRegex pattern="(^$|^__:__:__$|^(\d+:)?(\d+:)?\d+$)" />
                            <p:clientValidator event="keyup"/>
                        </p:inputMask>
                    </div>
                    <div class="zoomControl">
                        <span>Suurennus </span>
                        <a id="button-zoom-out" class="fa fa-search-minus" title="Pienennä"></a>
                        <a id="button-zoom-in" class="fa fa-search-plus" title="Suurenna"></a>
                    </div>
                </div>

                <pe:timeline id="timeline" widgetVar="timelineWdgt"
                             value="#{summaryBean.timeline}"
                             locale="#{summaryBean.locale}"
                             timeZone="#{summaryBean.timeZone}"
                             browserTimeZone="#{summaryBean.browserTimeZone}"
                             min="#{summaryBean.min}"
                             max="#{summaryBean.max}"
                             start="#{summaryBean.start}"
                             zoomMin="#{summaryBean.zoomMin}"
                             zoomMax="#{summaryBean.zoomMax}"
                             selectable="true"
                             zoomable="true"
                             moveable="true"
                             animate="false"
                             animateZoom="false"
                             axisOnTop="true"
                             groupsOrder="false"
                             groupsChangeable="false"
                             groupMinHeight="16"
                             editable="false"
                             timeChangeable="true"
                             showCurrentTime="false"
                             showMajorLabels="false"
                             stackEvents="false"
                             eventMarginAxis="0"
                             eventMargin="16">
                </pe:timeline>

                <h:outputScript library="js" name="summary.js"/>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
